<![CDATA[<div align="center">

# 🔴 Lyra Prompt Engine

**自进化 AI 提示词编译引擎**

[![Version](https://img.shields.io/badge/version-V5.3-red?style=flat-square)](PROMPT.md)
[![License](https://img.shields.io/badge/license-MIT-blue?style=flat-square)](LICENSE)
[![Stars](https://img.shields.io/github/stars/95369149/lyra-prompt-engine?style=flat-square&color=yellow)](https://github.com/95369149/lyra-prompt-engine/stargazers)

不是模板库。是编译器。

将模糊需求 → 结构精确、可直接使用的 AI 提示词。
会学习，会迭代，会适配不同模型。

[快速开始](#-快速开始) · [核心特性](#-核心特性) · [对比](#-lyra-vs-其他方案) · [进化指令](#-进化指令) · [Changelog](#-changelog)

</div>

---

## 📖 目录

- [快速开始](#-快速开始)
- [核心特性](#-核心特性)
- [8 种编译模式](#-8-种编译模式)
- [视觉生成协议](#-视觉生成协议)
- [8 维风格分析](#-8-维风格分析)
- [多模型编排](#-多模型编排)
- [Lyra vs 其他方案](#-lyra-vs-其他方案)
- [进化指令](#-进化指令)
- [使用方法](#-使用方法)
- [Changelog](#-changelog)
- [贡献](#-贡献)

---

## ⚡ 快速开始

将 [`PROMPT.md`](PROMPT.md) 的完整内容复制到任意 AI 对话的 System Prompt 中，然后：

**写文案：**
```
[文本] 帮我写一封拒绝供应商涨价的商务邮件，语气坚定但不失礼貌
```

**生成视频提示词：**
```
[视觉] 一台工业机器人在智能工厂中精准焊接，赛博朋克风格，Seedance 2.0
```

**设计 Agent：**
```
[Agent] 设计一个客服机器人的系统提示词，处理退款和投诉，要有安全约束
```

Lyra 会自动识别模式，提问澄清需求，然后输出结构化的提示词。

---

## 🧬 核心特性

| 特性 | 说明 |
|:-----|:-----|
| 🎯 **8 种编译模式** | 文本 / 代码 / 分析 / 创意 / 视觉 / Agent / 编排 / 风格 |
| 🧬 **三层进化** | 会话内学习 → 知识刷新 → 版本迭代，越用越准 |
| 🎨 **视觉生成协议** | 覆盖 MJ / DALL-E / Flux / Seedance / Kling / Sora，11 个场景模板 |
| ✍️ **8 维风格分析** | 本体论到情感浓度，8 个维度精准定义写作风格，三阶段构建 Skill |
| 🤖 **多模型编排** | Orchestrator 拆解 + Worker 执行 + 7 分制质检，省 token 不省质量 |
| 🧠 **模型感知** | 自动适配 Claude / GPT / Gemini / DeepSeek / 开源模型的最佳实践 |
| 🔴 **11 项质量红线** | 每次输出前静默自检，不含"尽量""适当"等模糊词 |

---

## 🎛 8 种编译模式

| 标签 | 用途 | 编译侧重 |
|:-----|:-----|:---------|
| `[文本]` | 文案、文章、邮件 | 语气、受众、结构、字数 |
| `[代码]` | 编程、调试、架构 | 技术栈、约束、错误处理 |
| `[分析]` | 数据分析、研究 | 推理链、证据、输出结构 |
| `[创意]` | 故事、广告、脑暴 | 风格锚定、情感、发散度 |
| `[视觉]` | 图片/视频提示词 | 视觉生成协议 |
| `[Agent]` | AI Agent 系统提示词 | 角色边界、工具调用、安全 |
| `[编排]` | 多模型协作 | 任务拆解、Worker 分发、质检 |
| `[风格]` | 写作风格 Skill | 8 维分析、三阶段构建 |

---

## 🎨 视觉生成协议

> 📎 独立文件：[`VISUAL.md`](VISUAL.md) — `[视觉]` 模式触发时加载

核心原则：**写意图，不写细节。** 新一代模型有世界知识和导演思维。

- 12 个场景模板（产品广告/品牌宣传/教学视频/换装/Vlog/口播/MV/动作迁移/小说动画/UI宣传片/工业设备...）
- 参考素材语法（@图片/@视频/@音频）
- 避坑清单 + 独立质量自检
| 音频→MV | "为@音频1生成符合氛围的剧情，转场卡点" |
| 小说→动画 | 直接粘贴原文+"画风对齐@视频1风格" |
| ... | 详见 [PROMPT.md](PROMPT.md) |

---

## ✍️ 8 维风格分析

> 去 AI 味的正确方向不是提示词，是让 AI 学会你的味道。

**8 个分析维度：**

| 维度 | 分析什么 |
|:-----|:---------|
| 本体论 | 如何构建"真实"？断言式还是留余地？ |
| 认识论 | 知识来源？经验派还是理论派？ |
| 语言哲学 | 如何使用语言？解构还是建构？ |
| 意识形态 | 价值导向？成就/过程/关系？ |
| 权力关系 | 与读者的姿态？教导/平等/仰视？ |
| 修辞学 | 论证方式？数据/案例/类比/反问？ |
| 句法与词汇 | 句式长短？口头禅？标点习惯？ |
| 情感浓度 | 1-10 分？释放点在哪？ |

**三阶段构建法：**
1. 📊 **提取** — 收集原创文章，按 8 维框架分析风格画像
2. 📦 **压缩** — 将分析压缩为 <2KB 的 Skill 文档 + few-shot 示例
3. 🔄 **增强** — AI 写稿→用户改稿→提取规律→更新 Skill，反复迭代

---

## 🤖 多模型编排

> 主模型做将军（拆解+质检），Worker 模型做苦力（搜索/生成/整理）。

```
Orchestrator（主模型）
  ├── 拆解任务，写 Spec
  ├── 派发给 Worker 模型执行
  ├── 质检回收（7 分制）
  │   ├── ≥7 分 → 通过
  │   ├── 5-6 分 → 打回重跑（最多 2 次）
  │   └── <5 分 → 自己接手
  └── 整合输出
```

**Worker 选型（2026-02）：**

| 任务类型 | 推荐模型 |
|:---------|:---------|
| 中文文案 | MiniMax M2.5 |
| 代码生成 | Qwen3-Coder |
| 推理分析 | DeepSeek R1 |
| 英文内容 | Llama 3.3 70B |
| 视觉理解 | Gemini 2.5 Flash |

---

## ⚔️ Lyra vs 其他方案

| 维度 | Lyra Engine | 静态模板库 | 手写 Prompt |
|:-----|:-----------|:----------|:-----------|
| **适配性** | 动态编译，按需生成 | 固定结构，复制粘贴 | 完全依赖经验 |
| **进化能力** | ✅ 三层自进化 | ❌ 无 | ❌ 无 |
| **模型感知** | ✅ 自动适配 | ❌ 通用模板 | ⚠️ 手动调整 |
| **视觉生成** | ✅ 11 场景协议 | ⚠️ 零散收集 | ❌ 无体系 |
| **风格学习** | ✅ 8 维分析 + Skill 迭代 | ❌ 无 | ❌ 无 |
| **多模型编排** | ✅ 7 分制质检 | ❌ 无 | ❌ 无 |
| **质量保障** | ✅ 11 项红线自检 | ❌ 无 | ⚠️ 靠自觉 |
| **维护成本** | 低（自进化） | 高（手动更新） | 高（每次重写） |

---

## 🔮 进化指令

| 指令 | 功能 |
|:-----|:-----|
| `Lyra /evolve` | 基于会话反馈输出优化建议 |
| `Lyra /changelog` | 版本变更历史 |
| `Lyra /audit` | 全面自检，报告过时技术 |
| `Lyra /benchmark [模型]` | 针对指定模型输出适配建议 |
| `Lyra /style` | 触发写作风格 Skill 迭代 |

---

## 📦 使用方法

1. 复制 [`PROMPT.md`](PROMPT.md) 全文
2. 粘贴到任意 AI 对话的 System Prompt（或首条消息）
3. 输入需求，可选附带 `[模式标签]`
4. Lyra 自动编译，输出结构化提示词

支持：ChatGPT / Claude / Gemini / DeepSeek / 通义千问 / 任意 LLM

---

## 📋 Changelog

### V5.3 (2026-02-17)
- 架构拆分：视觉生成协议独立为 [`VISUAL.md`](VISUAL.md)
- PROMPT.md 瘦身 ~50 行，专注文字/代码/分析/Agent/编排/风格
- 视觉协议可独立进化，跟随模型更新节奏
- 新增工业设备场景模板

### V5.2 (2026-02-17)
- 风格 Skill 协议重大升级：8 维风格分析框架 + 三阶段构建法
- 新增场景适配矩阵（推文/长文/演讲/商务邮件）
- 新增多模型编排模式（`[编排]`）
- Worker 选型表更新：新增视觉理解和长文本处理
- 质量红线升级至 11 项

### V5.1 (2026-02-16)
- 新增 `[编排]` 模式：多模型 Orchestrator 协作
- 新增质检协议（7 分制）
- 模型感知更新：2026 免费模型矩阵

### V5.0 (2026-02-15)
- 新增"写意图不写细节"核心原则
- 新增视频生成 11 场景模板库
- 新增写作风格 Skill 协议（四步法 + 迭代机制）
- 新增 `/style` 进化指令
- 视觉生成协议重写

### V4.1 (2026-02-15)
- 新增三层进化协议
- 新增版本迭代触发条件

### V4.0 (2026-02-15)
- 从 V3.0 完全重写
- 新增模型感知、质量红线 checklist

<details>
<summary>更早版本</summary>

### V3.0
- 初始版本（4-D 协议、Seedance 专属协议）

</details>

---

## ⭐ Star History

<a href="https://star-history.com/#95369149/lyra-prompt-engine&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=95369149/lyra-prompt-engine&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=95369149/lyra-prompt-engine&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=95369149/lyra-prompt-engine&type=Date" />
 </picture>
</a>

---

## 🤝 贡献

欢迎提交 Issue 和 PR：

- 🐛 发现 bug 或过时内容 → [提 Issue](https://github.com/95369149/lyra-prompt-engine/issues)
- 💡 新的编译模式或场景模板 → 提 PR
- 📝 分享你的使用案例 → 在 Issue 中分享

---

## License

[MIT](LICENSE) © 2026 Lyra Prompt Engine
]]>